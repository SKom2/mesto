(()=>{"use strict";class e{constructor(e,t,{handleCardClick:s}){this._name=e.name,this._link=e.link,this._templateSelector=t,this._handleCardClick=s}_getTemplate(){return document.querySelector(this._templateSelector).content.querySelector(".card").cloneNode(!0)}_setData(){this._cardImage=this._element.querySelector(".card__image"),this._cardImage.src=this._link,this._cardImage.alt=this._name,this._cardName=this._element.querySelector(".card__title"),this._cardName.textContent=this._name}_deleteCard(){this._element.remove(),this._element=null}_likeCard(){this._like=this._element.querySelector(".card__like"),this._like.classList.toggle("card__like_active")}_setEventListeners(){this._deleteButton=this._element.querySelector(".card__delete"),this._deleteButton.addEventListener("click",(()=>{this._deleteCard()})),this._cardImage.addEventListener("click",(()=>{this._handleCardClick({name:this._name,link:this._link})})),this._cardLike=this._element.querySelector(".card__like"),this._cardLike.addEventListener("click",(()=>{this._likeCard()}))}generateCard(){return this._element=this._getTemplate(),this._setData(),this._setEventListeners(),this._element}}class t{constructor(e,t){this._config=e,this._formElement=t,this._inputList=Array.from(this._formElement.querySelectorAll(this._config.inputSelector)),this._buttonElement=this._formElement.querySelector(this._config.submitButtonSelector)}_showError(e){const t=this._formElement.querySelector(`.${e.id}-error`);e.classList.add(this._config.inputErrorClass),t.classList.add(this._config.errorClass),t.textContent=e.validationMessage}_hideError(e){const t=this._formElement.querySelector(`.${e.id}-error`);e.classList.remove(this._config.inputErrorClass),t.classList.remove(this._config.errorClass),t.textContent=""}_checkInputValidity(e){e.validity.valid?this._hideError(e):this._showError(e)}_hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}_toggleButtonState(){this._hasInvalidInput(this._inputList)?(this._buttonElement.classList.add(this._config.inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._config.inactiveButtonClass),this._buttonElement.disabled=!1)}_setEventListeners(){this._toggleButtonState(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}setButtonState(){this._toggleButtonState()}setInputValidity(){this._inputList.forEach((e=>{this._checkInputValidity(e)}))}setState(){this._toggleButtonState(),this.setInputValidity()}enableValidation(){this._setEventListeners()}}const s=document.querySelector("#button_edit"),r=document.querySelector("#popup_edit"),n=document.querySelector("#button_add"),o=document.querySelector("#popup_add"),i=document.querySelector("#cardsAddForm"),l=document.querySelector("#profileEditForm"),a=document.querySelector(".places"),c=document.querySelector("#name"),d=document.querySelector("#about-person"),_=document.querySelector(".profile__title"),u=document.querySelector(".profile__subtitle"),h=document.querySelector("#popup_photo"),p=document.querySelector("#photo-link"),m=(document.querySelector("#photo-name").value,p.value,{inputSelector:".form__input",submitButtonSelector:".form__button",inactiveButtonClass:"form__button_inactive",inputErrorClass:"form__input_type_error",errorClass:"form__input-error_visible"});class S{constructor(e){this._popupSelector=e,this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popupSelector.classList.add("popup_opened")}close(){this._popupSelector.classList.remove("popup_opened")}_handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._closeButton=this._popupSelector.querySelector(".popup__close"),this._closeButton.addEventListener("click",(()=>{this.close()})),this._popupSelector.addEventListener("mousedown",(e=>{e.target===this._popupSelector&&this.close()})),document.addEventListener("keydown",this._handleEscClose)}}class v extends S{constructor(e){super(e),this._image=this._popupSelector.querySelector(".popup__image"),this._title=this._popupSelector.querySelector(".popup__title")}open(e){super.open(),this._image.src=e.link,this._image.alt=e.name,this._title.textContent=e.name}}class y extends S{constructor({popupSelector:e,callBack:t}){super(e),this._callBack=t,this._formElement=this._popupSelector.querySelector(".form"),this.setEventListeners()}_getInputValues(){return this._formData={},this._inputList=this._popupSelector.querySelectorAll(".form__input"),this._inputList.forEach((e=>{this._formData[e.name]=e.value})),this._formData}setEventListeners(){super.setEventListeners(),this._formElement.addEventListener("submit",(e=>{e.preventDefault(),this._callBack(this._getInputValues()),this.close()}))}close(){super.close(),this._formElement.reset()}}const k=new class{constructor({items:e,renderer:t},s){this._renderedItems=e,this._renderer=t,this._container=s}addItem(e){this._container.prepend(e)}renderItems(){this._renderedItems.forEach((e=>{this._renderer(e)}))}}({items:[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}],renderer:t=>{const s=new e(t,"#card-template",{handleCardClick:e=>{const t=new v(h);t.open(e),t.setEventListeners()}}).generateCard();k.addItem(s)}},a),E=new y({popupSelector:r,callBack:e=>{C.setUserInfo(e)}}),g=new y({popupSelector:o,callBack:t=>{const s=new e(t,"#card-template",{handleCardClick:e=>{const t=new v(h);t.open(e),t.setEventListeners()}}).generateCard();k.addItem(s)}}),f=new t(m,i),C=new class{constructor({nameSelector:e,aboutUserSelector:t}){this._nameSelector=e,this._aboutUserSelector=t}getUserInfo(){return{name:this._nameSelector.textContent,about:this._aboutUserSelector.textContent}}setData(e,t){const s=this.getUserInfo();e.value=s.name,t.value=s.about}setUserInfo(e){this._nameSelector.textContent=e.name,this._aboutUserSelector.textContent=e.about}}({nameSelector:_,aboutUserSelector:u}),L=new t(m,l);s.addEventListener("click",(()=>{C.setData(c,d),E.open(),L.setState()})),n.addEventListener("click",(()=>{g.open(),f.setButtonState()})),k.renderItems(),L.enableValidation(),f.enableValidation()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5bY29udGVudCBoYXNoXS5qcyIsIm1hcHBpbmdzIjoibUJBQU8sTUFBTUEsRUFDVEMsWUFBWUMsRUFBTUMsR0FBa0IsZ0JBQUNDLElBQ2pDQyxLQUFLQyxNQUFRSixFQUFLSyxLQUNsQkYsS0FBS0csTUFBUU4sRUFBS08sS0FDbEJKLEtBQUtLLGtCQUFvQlAsRUFDekJFLEtBQUtNLGlCQUFtQlAsQ0FDNUIsQ0FFQVEsZUFPSSxPQU5vQkMsU0FDZkMsY0FBY1QsS0FBS0ssbUJBQ25CSyxRQUNBRCxjQUFjLFNBQ2RFLFdBQVUsRUFHbkIsQ0FFQUMsV0FDSVosS0FBS2EsV0FBYWIsS0FBS2MsU0FBU0wsY0FBYyxnQkFDOUNULEtBQUthLFdBQVdFLElBQU1mLEtBQUtHLE1BQzNCSCxLQUFLYSxXQUFXRyxJQUFNaEIsS0FBS0MsTUFDM0JELEtBQUtpQixVQUFZakIsS0FBS2MsU0FBU0wsY0FBYyxnQkFDN0NULEtBQUtpQixVQUFVQyxZQUFjbEIsS0FBS0MsS0FDdEMsQ0FFQWtCLGNBQ0luQixLQUFLYyxTQUFTTSxTQUNkcEIsS0FBS2MsU0FBVyxJQUNwQixDQUVBTyxZQUNJckIsS0FBS3NCLE1BQVF0QixLQUFLYyxTQUFTTCxjQUFjLGVBQ3pDVCxLQUFLc0IsTUFBTUMsVUFBVUMsT0FBTyxvQkFDaEMsQ0FFQUMscUJBQ0l6QixLQUFLMEIsY0FBZ0IxQixLQUFLYyxTQUFTTCxjQUFjLGlCQUNqRFQsS0FBSzBCLGNBQWNDLGlCQUFpQixTQUFTLEtBQ3pDM0IsS0FBS21CLGFBQWEsSUFFdEJuQixLQUFLYSxXQUFXYyxpQkFBaUIsU0FBUyxLQUN0QzNCLEtBQUtNLGlCQUFpQixDQUFFSixLQUFNRixLQUFLQyxNQUFPRyxLQUFNSixLQUFLRyxPQUFRLElBRWpFSCxLQUFLNEIsVUFBWTVCLEtBQUtjLFNBQVNMLGNBQWMsZUFDN0NULEtBQUs0QixVQUFVRCxpQkFBaUIsU0FBUyxLQUNyQzNCLEtBQUtxQixXQUFXLEdBRXhCLENBRUFRLGVBS0ksT0FKQTdCLEtBQUtjLFNBQVdkLEtBQUtPLGVBQ3JCUCxLQUFLWSxXQUNMWixLQUFLeUIscUJBRUV6QixLQUFLYyxRQUNoQixFQ3hERyxNQUFNZ0IsRUFDVGxDLFlBQVltQyxFQUFRQyxHQUNoQmhDLEtBQUtpQyxRQUFVRixFQUNmL0IsS0FBS2tDLGFBQWVGLEVBQ3BCaEMsS0FBS21DLFdBQWFDLE1BQU1DLEtBQUtyQyxLQUFLa0MsYUFBYUksaUJBQWlCdEMsS0FBS2lDLFFBQVFNLGdCQUM3RXZDLEtBQUt3QyxlQUFpQnhDLEtBQUtrQyxhQUFhekIsY0FBY1QsS0FBS2lDLFFBQVFRLHFCQUN2RSxDQUVBQyxXQUFXQyxHQUNQLE1BQU1DLEVBQWU1QyxLQUFLa0MsYUFBYXpCLGNBQWUsSUFBR2tDLEVBQWFFLFlBQ3RFRixFQUFhcEIsVUFBVXVCLElBQUk5QyxLQUFLaUMsUUFBUWMsaUJBQ3hDSCxFQUFhckIsVUFBVXVCLElBQUk5QyxLQUFLaUMsUUFBUWUsWUFDeENKLEVBQWExQixZQUFjeUIsRUFBYU0saUJBQzVDLENBRUFDLFdBQVdQLEdBQ1AsTUFBTUMsRUFBZTVDLEtBQUtrQyxhQUFhekIsY0FBZSxJQUFHa0MsRUFBYUUsWUFDdEVGLEVBQWFwQixVQUFVSCxPQUFPcEIsS0FBS2lDLFFBQVFjLGlCQUMzQ0gsRUFBYXJCLFVBQVVILE9BQU9wQixLQUFLaUMsUUFBUWUsWUFDM0NKLEVBQWExQixZQUFjLEVBQy9CLENBRUFpQyxvQkFBb0JSLEdBQ1hBLEVBQWFTLFNBQVNDLE1BR3ZCckQsS0FBS2tELFdBQVdQLEdBRmhCM0MsS0FBSzBDLFdBQVdDLEVBSXhCLENBRUFXLG1CQUNJLE9BQU90RCxLQUFLbUMsV0FBV29CLE1BQU1aLElBQ2pCQSxFQUFhUyxTQUFTQyxPQUV0QyxDQUVBRyxxQkFDUXhELEtBQUtzRCxpQkFBaUJ0RCxLQUFLbUMsYUFDM0JuQyxLQUFLd0MsZUFBZWpCLFVBQVV1QixJQUFJOUMsS0FBS2lDLFFBQVF3QixxQkFDL0N6RCxLQUFLd0MsZUFBZWtCLFVBQVcsSUFHL0IxRCxLQUFLd0MsZUFBZWpCLFVBQVVILE9BQU9wQixLQUFLaUMsUUFBUXdCLHFCQUNsRHpELEtBQUt3QyxlQUFla0IsVUFBVyxFQUV2QyxDQUVBakMscUJBQ0l6QixLQUFLd0QscUJBQ0x4RCxLQUFLbUMsV0FBV3dCLFNBQVNoQixJQUNyQkEsRUFBYWhCLGlCQUFpQixTQUFTLEtBQ25DM0IsS0FBS21ELG9CQUFvQlIsR0FDekIzQyxLQUFLd0Qsb0JBQW9CLEdBQzNCLEdBRVYsQ0FFQUksaUJBQ0k1RCxLQUFLd0Qsb0JBQ1QsQ0FFQUssbUJBQ0k3RCxLQUFLbUMsV0FBV3dCLFNBQVNoQixJQUNyQjNDLEtBQUttRCxvQkFBb0JSLEVBQWEsR0FFOUMsQ0FFQW1CLFdBQ0k5RCxLQUFLd0QscUJBQ0x4RCxLQUFLNkQsa0JBQ1QsQ0FFQUUsbUJBQ0kvRCxLQUFLeUIsb0JBQ1QsRUMxRUcsTUFBTXVDLEVBQW9CeEQsU0FBU0MsY0FBYyxnQkFDM0N3RCxFQUFtQnpELFNBQVNDLGNBQWMsZUFDMUN5RCxFQUFpQjFELFNBQVNDLGNBQWMsZUFDeEMwRCxFQUFnQjNELFNBQVNDLGNBQWMsY0FDdkMyRCxFQUFlNUQsU0FBU0MsY0FBYyxpQkFDdEM0RCxFQUFpQjdELFNBQVNDLGNBQWMsb0JBQ3hDNkQsRUFBUzlELFNBQVNDLGNBQWMsV0FDaEM4RCxFQUFZL0QsU0FBU0MsY0FBYyxTQUNuQytELEVBQWFoRSxTQUFTQyxjQUFjLGlCQUNwQ2dFLEVBQWVqRSxTQUFTQyxjQUFjLG1CQUN0Q2lFLEVBQWtCbEUsU0FBU0MsY0FBYyxzQkFDekNrRSxFQUFhbkUsU0FBU0MsY0FBYyxnQkFFM0NtRSxFQUFpQnBFLFNBQVNDLGNBQWMsZUFJakNvRSxHQUhVckUsU0FBU0MsY0FBYyxlQUNBcUUsTUFBYUYsRUFBZUUsTUFFMUMsQ0FDNUJ2QyxjQUFlLGVBQ2ZFLHFCQUFzQixnQkFDdEJnQixvQkFBcUIsd0JBQ3JCVixnQkFBaUIseUJBQ2pCQyxXQUFZLDhCQ3RCVCxNQUFNK0IsRUFDVG5GLFlBQVlvRixHQUNSaEYsS0FBS2lGLGVBQWlCRCxFQUN0QmhGLEtBQUtrRixnQkFBa0JsRixLQUFLa0YsZ0JBQWdCQyxLQUFLbkYsS0FDckQsQ0FFQW9GLE9BQ0lwRixLQUFLaUYsZUFBZTFELFVBQVV1QixJQUFJLGVBQ3RDLENBRUF1QyxRQUNJckYsS0FBS2lGLGVBQWUxRCxVQUFVSCxPQUFPLGVBQ3pDLENBRUE4RCxnQkFBZ0JJLEdBQ0ksV0FBWkEsRUFBSUMsS0FDSnZGLEtBQUtxRixPQUViLENBRUFHLG9CQUNJeEYsS0FBS3lGLGFBQWV6RixLQUFLaUYsZUFBZXhFLGNBQWMsaUJBQ3REVCxLQUFLeUYsYUFBYTlELGlCQUFpQixTQUFTLEtBQ3hDM0IsS0FBS3FGLE9BQU8sSUFHaEJyRixLQUFLaUYsZUFBZXRELGlCQUFpQixhQUFjMkQsSUFDNUNBLEVBQUlJLFNBQVcxRixLQUFLaUYsZ0JBQ25CakYsS0FBS3FGLE9BQ1QsSUFHSjdFLFNBQVNtQixpQkFBaUIsVUFBVzNCLEtBQUtrRixnQkFDOUMsRUMvQkcsTUFBTVMsVUFBdUJaLEVBQ2hDbkYsWUFBWW9GLEdBQ1JZLE1BQU1aLEdBQ05oRixLQUFLNkYsT0FBUzdGLEtBQUtpRixlQUFleEUsY0FBYyxpQkFDaERULEtBQUs4RixPQUFTOUYsS0FBS2lGLGVBQWV4RSxjQUFjLGdCQUNwRCxDQUVBMkUsS0FBS3ZGLEdBQ0QrRixNQUFNUixPQUNOcEYsS0FBSzZGLE9BQU85RSxJQUFNbEIsRUFBS08sS0FDdkJKLEtBQUs2RixPQUFPN0UsSUFBTW5CLEVBQUtLLEtBQ3ZCRixLQUFLOEYsT0FBTzVFLFlBQWNyQixFQUFLSyxJQUNuQyxFQ1pHLE1BQU02RixVQUFzQmhCLEVBQy9CbkYsYUFBWSxjQUFDb0YsRUFBYSxTQUFFZ0IsSUFDeEJKLE1BQU1aLEdBQ05oRixLQUFLaUcsVUFBWUQsRUFDakJoRyxLQUFLa0MsYUFBZWxDLEtBQUtpRixlQUFleEUsY0FBYyxTQUN0RFQsS0FBS3dGLG1CQUNULENBRUFVLGtCQU9JLE9BTkFsRyxLQUFLbUcsVUFBWSxDQUFDLEVBQ2xCbkcsS0FBS21DLFdBQWFuQyxLQUFLaUYsZUFBZTNDLGlCQUFpQixnQkFDdkR0QyxLQUFLbUMsV0FBV3dCLFNBQVN5QyxJQUNyQnBHLEtBQUttRyxVQUFVQyxFQUFNbEcsTUFBUWtHLEVBQU10QixLQUFLLElBR3JDOUUsS0FBS21HLFNBQ2hCLENBRUFYLG9CQUNJSSxNQUFNSixvQkFDTnhGLEtBQUtrQyxhQUFhUCxpQkFBaUIsVUFBVzJELElBQzFDQSxFQUFJZSxpQkFDSnJHLEtBQUtpRyxVQUFVakcsS0FBS2tHLG1CQUNwQmxHLEtBQUtxRixPQUFPLEdBRXBCLENBRUFBLFFBQ0lPLE1BQU1QLFFBQ05yRixLQUFLa0MsYUFBYW9FLE9BQ3RCLEVDUkosTUFBTUMsRUFBVyxJQ3ZCVixNQUNIM0csYUFBWSxNQUFFNEcsRUFBSyxTQUFFQyxHQUFZQyxHQUM3QjFHLEtBQUsyRyxlQUFpQkgsRUFDdEJ4RyxLQUFLNEcsVUFBWUgsRUFDakJ6RyxLQUFLNkcsV0FBYUgsQ0FDdEIsQ0FFQUksUUFBUUMsR0FDSi9HLEtBQUs2RyxXQUFXRyxRQUFRRCxFQUM1QixDQUVBRSxjQUNJakgsS0FBSzJHLGVBQWVoRCxTQUFTdUQsSUFDekJsSCxLQUFLNEcsVUFBVU0sRUFBSyxHQUU1QixHRFEwQixDQUMxQlYsTUpBd0IsQ0FDeEIsQ0FDSXRHLEtBQU0sUUFDTkUsS0FBTSxpRkFFVixDQUNJRixLQUFNLHNCQUNORSxLQUFNLDZGQUVWLENBQ0lGLEtBQU0sVUFDTkUsS0FBTSxrRkFFVixDQUNJRixLQUFNLFdBQ05FLEtBQU0sb0ZBRVYsQ0FDSUYsS0FBTSxxQkFDTkUsS0FBTSw2RkFFVixDQUNJRixLQUFNLFNBQ05FLEtBQU0sa0ZJdEJWcUcsU0FBV1MsSUFDUCxNQU9NQyxFQVBPLElBQUl4SCxFQUFLdUgsRUFBTSxpQkFDeEIsQ0FBQ25ILGdCQUFrQkYsSUFDWCxNQUFNdUgsRUFBaUIsSUFBSXpCLEVBQWVoQixHQUMxQ3lDLEVBQWVoQyxLQUFLdkYsR0FDcEJ1SCxFQUFlNUIsbUJBQW1CLElBR3JCM0QsZUFDekIwRSxFQUFTTyxRQUFRSyxFQUFZLEdBRWxDN0MsR0FHRytDLEVBQTJCLElBQUl0QixFQUFjLENBQy9DZixjQUFlZixFQUNmK0IsU0FBV25HLElBQ1B5SCxFQUFTQyxZQUFZMUgsRUFBSyxJQUk1QjJILEVBQXdCLElBQUl6QixFQUFjLENBQ3hDZixjQUFlYixFQUNmNkIsU0FBV2tCLElBQ1AsTUFPTUMsRUFQTyxJQUFJeEgsRUFBS3VILEVBQU0saUJBQ3hCLENBQUNuSCxnQkFBa0JGLElBQ1gsTUFBTXVILEVBQWlCLElBQUl6QixFQUFlaEIsR0FDMUN5QyxFQUFlaEMsS0FBS3ZGLEdBQ3BCdUgsRUFBZTVCLG1CQUFtQixJQUdyQjNELGVBQ3pCMEUsRUFBU08sUUFBUUssRUFBWSxJQUluQ00sRUFBd0IsSUFBSTNGLEVBQWMrQyxFQUFrQlQsR0FDNURrRCxFQUFXLElFN0RWLE1BQ0gxSCxhQUFZLGFBQUU4SCxFQUFZLGtCQUFFQyxJQUN4QjNILEtBQUs0SCxjQUFnQkYsRUFDckIxSCxLQUFLNkgsbUJBQXFCRixDQUM5QixDQUVBRyxjQUNJLE1BQU8sQ0FBRTVILEtBQU1GLEtBQUs0SCxjQUFjMUcsWUFBYTZHLE1BQU8vSCxLQUFLNkgsbUJBQW1CM0csWUFDbEYsQ0FFQThHLFFBQVN6RCxFQUFXQyxHQUNoQixNQUFNM0UsRUFBT0csS0FBSzhILGNBQ2xCdkQsRUFBVU8sTUFBUWpGLEVBQUtLLEtBQ3ZCc0UsRUFBV00sTUFBUWpGLEVBQUtrSSxLQUM1QixDQUVBUixZQUFhMUgsR0FDVEcsS0FBSzRILGNBQWMxRyxZQUFjckIsRUFBS0ssS0FDdENGLEtBQUs2SCxtQkFBbUIzRyxZQUFjckIsRUFBS2tJLEtBQy9DLEdGMEMwQixDQUFDTCxhQUFjakQsRUFBY2tELGtCQUFtQmpELElBQ3hFdUQsRUFBMkIsSUFBSW5HLEVBQWMrQyxFQUFrQlIsR0FFckVMLEVBQWtCckMsaUJBQWlCLFNBQVMsS0FDeEMyRixFQUFTVSxRQUFRekQsRUFBV0MsR0FDNUI2QyxFQUF5QmpDLE9BQ3pCNkMsRUFBeUJuRSxVQUFVLElBR3ZDSSxFQUFldkMsaUJBQWlCLFNBQVMsS0FDckM2RixFQUFzQnBDLE9BQ3RCcUMsRUFBc0I3RCxnQkFBZ0IsSUFHMUMyQyxFQUFTVSxjQUNUZ0IsRUFBeUJsRSxtQkFDekIwRCxFQUFzQjFELGtCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgQ2FyZCB7XHJcbiAgICBjb25zdHJ1Y3RvcihkYXRhLCB0ZW1wbGF0ZVNlbGVjdG9yLCB7aGFuZGxlQ2FyZENsaWNrfSkge1xyXG4gICAgICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XHJcbiAgICAgICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcclxuICAgICAgICB0aGlzLl90ZW1wbGF0ZVNlbGVjdG9yID0gdGVtcGxhdGVTZWxlY3RvcjtcclxuICAgICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XHJcbiAgICB9XHJcblxyXG4gICAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcclxuICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fdGVtcGxhdGVTZWxlY3RvcilcclxuICAgICAgICAgICAgLmNvbnRlbnRcclxuICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkJylcclxuICAgICAgICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGNhcmRFbGVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIF9zZXREYXRhKCkge1xyXG4gICAgICAgIHRoaXMuX2NhcmRJbWFnZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2ltYWdlJyk7XHJcbiAgICAgICAgdGhpcy5fY2FyZEltYWdlLnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICAgICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IHRoaXMuX25hbWU7XHJcbiAgICAgICAgdGhpcy5fY2FyZE5hbWUgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX190aXRsZScpXHJcbiAgICAgICAgdGhpcy5fY2FyZE5hbWUudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG4gICAgfVxyXG5cclxuICAgIF9kZWxldGVDYXJkKCkge1xyXG4gICAgICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICAgICAgdGhpcy5fZWxlbWVudCA9IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgX2xpa2VDYXJkKCkge1xyXG4gICAgICAgIHRoaXMuX2xpa2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19saWtlJyk7XHJcbiAgICAgICAgdGhpcy5fbGlrZS5jbGFzc0xpc3QudG9nZ2xlKCdjYXJkX19saWtlX2FjdGl2ZScpO1xyXG4gICAgfVxyXG5cclxuICAgIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICB0aGlzLl9kZWxldGVCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19kZWxldGUnKTtcclxuICAgICAgICB0aGlzLl9kZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2RlbGV0ZUNhcmQoKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIHRoaXMuX2NhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKHsgbmFtZTogdGhpcy5fbmFtZSwgbGluazogdGhpcy5fbGluayB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLl9jYXJkTGlrZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2xpa2UnKTtcclxuICAgICAgICB0aGlzLl9jYXJkTGlrZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fbGlrZUNhcmQoKTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGdlbmVyYXRlQ2FyZCgpIHtcclxuICAgICAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuICAgICAgICB0aGlzLl9zZXREYXRhKCk7XHJcbiAgICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XHJcbiAgICB9XHJcblxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICAgIGNvbnN0cnVjdG9yKGNvbmZpZywgZm9ybUVsZW1lbnQpIHtcclxuICAgICAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XHJcbiAgICAgICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcclxuICAgICAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fY29uZmlnLmlucHV0U2VsZWN0b3IpKTtcclxuICAgICAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9jb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG4gICAgfVxyXG5cclxuICAgIF9zaG93RXJyb3IoaW5wdXRFbGVtZW50KXtcclxuICAgICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICAgICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmVycm9yQ2xhc3MpO1xyXG4gICAgICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIH1cclxuXHJcbiAgICBfaGlkZUVycm9yKGlucHV0RWxlbWVudCl7XHJcbiAgICAgICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5lcnJvckNsYXNzKTtcclxuICAgICAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSAnJztcclxuICAgIH1cclxuXHJcbiAgICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCl7XHJcbiAgICAgICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgICAgICAgdGhpcy5fc2hvd0Vycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5faGlkZUVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9oYXNJbnZhbGlkSW5wdXQoKXtcclxuICAgICAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgX3RvZ2dsZUJ1dHRvblN0YXRlKCl7XHJcbiAgICAgICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCh0aGlzLl9pbnB1dExpc3QpKXtcclxuICAgICAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICAgICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9zZXRFdmVudExpc3RlbmVycygpe1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICBzZXRCdXR0b25TdGF0ZSgpIHtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpXHJcbiAgICB9XHJcblxyXG4gICAgc2V0SW5wdXRWYWxpZGl0eSgpIHtcclxuICAgICAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICBzZXRTdGF0ZSgpIHtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpXHJcbiAgICAgICAgdGhpcy5zZXRJbnB1dFZhbGlkaXR5KCk7XHJcbiAgICB9XHJcblxyXG4gICAgZW5hYmxlVmFsaWRhdGlvbigpe1xyXG4gICAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB9O1xyXG59IiwiZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2J1dHRvbl9lZGl0Jyk7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdFBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3BvcHVwX2VkaXQnKTtcclxuZXhwb3J0IGNvbnN0IHBob3RvQWRkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2J1dHRvbl9hZGQnKVxyXG5leHBvcnQgY29uc3QgcGhvdG9BZGRQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwb3B1cF9hZGQnKTtcclxuZXhwb3J0IGNvbnN0IGNhcmRzQWRkRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjYXJkc0FkZEZvcm0nKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0Rm9ybSA9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Byb2ZpbGVFZGl0Rm9ybScpXHJcbmV4cG9ydCBjb25zdCBwbGFjZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGxhY2VzJyk7XHJcbmV4cG9ydCBjb25zdCBuYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbmFtZScpO1xyXG5leHBvcnQgY29uc3QgYWJvdXRJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhYm91dC1wZXJzb24nKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX190aXRsZScpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZVN1YnRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX3N1YnRpdGxlJyk7XHJcbmV4cG9ydCBjb25zdCBwaG90b1BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3BvcHVwX3Bob3RvJyk7XHJcblxyXG5jb25zdCBwaG90b0xpbmtJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwaG90by1saW5rJyk7XHJcbmNvbnN0IHBob3RvTmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Bob3RvLW5hbWUnKTtcclxuZXhwb3J0IGNvbnN0IGNhcmREYXRhID0ge25hbWU6IHBob3RvTmFtZUlucHV0LnZhbHVlLCBsaW5rOiBwaG90b0xpbmtJbnB1dC52YWx1ZX07XHJcblxyXG5leHBvcnQgY29uc3QgdmFsaWRhdGlvbkNvbmZpZyA9IHtcclxuICAgIGlucHV0U2VsZWN0b3I6ICcuZm9ybV9faW5wdXQnLFxyXG4gICAgc3VibWl0QnV0dG9uU2VsZWN0b3I6ICcuZm9ybV9fYnV0dG9uJyxcclxuICAgIGluYWN0aXZlQnV0dG9uQ2xhc3M6ICdmb3JtX19idXR0b25faW5hY3RpdmUnLFxyXG4gICAgaW5wdXRFcnJvckNsYXNzOiAnZm9ybV9faW5wdXRfdHlwZV9lcnJvcicsXHJcbiAgICBlcnJvckNsYXNzOiAnZm9ybV9faW5wdXQtZXJyb3JfdmlzaWJsZSdcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAgICB7XHJcbiAgICAgICAgbmFtZTogJ9CQ0YDRhdGL0LcnLFxyXG4gICAgICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvYXJraHl6LmpwZydcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgbmFtZTogJ9Cn0LXQu9GP0LHQuNC90YHQutCw0Y8g0L7QsdC70LDRgdGC0YwnLFxyXG4gICAgICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvY2hlbHlhYmluc2stb2JsYXN0LmpwZydcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgbmFtZTogJ9CY0LLQsNC90L7QstC+JyxcclxuICAgICAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2l2YW5vdm8uanBnJ1xyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBuYW1lOiAn0JrQsNC80YfQsNGC0LrQsCcsXHJcbiAgICAgICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9rYW1jaGF0a2EuanBnJ1xyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBuYW1lOiAn0KXQvtC70LzQvtCz0L7RgNGB0LrQuNC5INGA0LDQudC+0L0nLFxyXG4gICAgICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQva2hvbG1vZ29yc2t5LXJheW9uLmpwZydcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgbmFtZTogJ9CR0LDQudC60LDQuycsXHJcbiAgICAgICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9iYWlrYWwuanBnJ1xyXG4gICAgfVxyXG5dOyIsImV4cG9ydCBjbGFzcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBTZWxlY3RvciA9IHBvcHVwU2VsZWN0b3I7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIG9wZW4oKSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBTZWxlY3Rvci5jbGFzc0xpc3QuYWRkKCdwb3B1cF9vcGVuZWQnKTtcclxuICAgIH1cclxuXHJcbiAgICBjbG9zZSgpIHtcclxuICAgICAgICB0aGlzLl9wb3B1cFNlbGVjdG9yLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX29wZW5lZCcpO1xyXG4gICAgfVxyXG5cclxuICAgIF9oYW5kbGVFc2NDbG9zZShldnQpIHtcclxuICAgICAgICBpZiAoZXZ0LmtleSA9PT0gJ0VzY2FwZScpe1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICAgIHRoaXMuX2Nsb3NlQnV0dG9uID0gdGhpcy5fcG9wdXBTZWxlY3Rvci5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Nsb3NlJyk7XHJcbiAgICAgICAgdGhpcy5fY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5fcG9wdXBTZWxlY3Rvci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIGlmKGV2dC50YXJnZXQgPT09IHRoaXMuX3BvcHVwU2VsZWN0b3Ipe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICAgIH1cclxufSIsImltcG9ydCB7UG9wdXB9IGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICAgICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5faW1hZ2UgPSB0aGlzLl9wb3B1cFNlbGVjdG9yLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW1hZ2UnKTtcclxuICAgICAgICB0aGlzLl90aXRsZSA9IHRoaXMuX3BvcHVwU2VsZWN0b3IucXVlcnlTZWxlY3RvcignLnBvcHVwX190aXRsZScpO1xyXG4gICAgfVxyXG5cclxuICAgIG9wZW4oZGF0YSkge1xyXG4gICAgICAgIHN1cGVyLm9wZW4oKTtcclxuICAgICAgICB0aGlzLl9pbWFnZS5zcmMgPSBkYXRhLmxpbms7XHJcbiAgICAgICAgdGhpcy5faW1hZ2UuYWx0ID0gZGF0YS5uYW1lO1xyXG4gICAgICAgIHRoaXMuX3RpdGxlLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHtQb3B1cH0gZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3Ioe3BvcHVwU2VsZWN0b3IsIGNhbGxCYWNrfSkge1xyXG4gICAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX2NhbGxCYWNrID0gY2FsbEJhY2s7XHJcbiAgICAgICAgdGhpcy5fZm9ybUVsZW1lbnQgPSB0aGlzLl9wb3B1cFNlbGVjdG9yLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtJyk7XHJcbiAgICAgICAgdGhpcy5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgfVxyXG5cclxuICAgIF9nZXRJbnB1dFZhbHVlcygpe1xyXG4gICAgICAgIHRoaXMuX2Zvcm1EYXRhID0ge307XHJcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fcG9wdXBTZWxlY3Rvci5xdWVyeVNlbGVjdG9yQWxsKCcuZm9ybV9faW5wdXQnKTtcclxuICAgICAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fZm9ybURhdGFbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5fZm9ybURhdGE7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgICAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB0aGlzLl9jYWxsQmFjayh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNsb3NlKCkge1xyXG4gICAgICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICAgICAgdGhpcy5fZm9ybUVsZW1lbnQucmVzZXQoKTtcclxuICAgIH1cclxuXHJcbn0iLCJpbXBvcnQgeyBDYXJkIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgeyBGb3JtVmFsaWRhdG9yIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQge1xyXG4gICAgdmFsaWRhdGlvbkNvbmZpZyxcclxuICAgIGluaXRpYWxDYXJkcyxcclxuICAgIHByb2ZpbGVFZGl0QnV0dG9uLFxyXG4gICAgcHJvZmlsZUVkaXRQb3B1cCxcclxuICAgIHBob3RvQWRkQnV0dG9uLFxyXG4gICAgcGhvdG9BZGRQb3B1cCxcclxuICAgIGNhcmRzQWRkRm9ybSxcclxuICAgIHByb2ZpbGVFZGl0Rm9ybSxcclxuICAgIHBsYWNlcyxcclxuICAgIG5hbWVJbnB1dCxcclxuICAgIGFib3V0SW5wdXQsXHJcbiAgICBwcm9maWxlVGl0bGUsXHJcbiAgICBwcm9maWxlU3VidGl0bGUsXHJcbiAgICBwaG90b1BvcHVwXHJcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5pbXBvcnQgeyBQb3B1cFdpdGhJbWFnZSB9IGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCB7IFBvcHVwV2l0aEZvcm0gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCB7VXNlckluZm99IGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCB7IFNlY3Rpb24gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCAnLi9pbmRleC5jc3MnXHJcblxyXG5jb25zdCBjYXJkTGlzdCA9IG5ldyBTZWN0aW9uICh7XHJcbiAgICBpdGVtczogaW5pdGlhbENhcmRzLFxyXG4gICAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XHJcbiAgICAgICAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKGl0ZW0sICcjY2FyZC10ZW1wbGF0ZScsXHJcbiAgICAgICAgICAgIHtoYW5kbGVDYXJkQ2xpY2s6IChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcG9wdXBXaXRoSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UocGhvdG9Qb3B1cCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9wdXBXaXRoSW1hZ2Uub3BlbihkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICBwb3B1cFdpdGhJbWFnZS5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQuZ2VuZXJhdGVDYXJkKCk7XHJcbiAgICAgICAgY2FyZExpc3QuYWRkSXRlbShjYXJkRWxlbWVudCk7XHJcbiAgICB9XHJcbn0sIHBsYWNlcyk7XHJcblxyXG5cclxuY29uc3QgcG9wdXBXaXRoRWRpdFByb2ZpbGVGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xyXG4gICAgcG9wdXBTZWxlY3RvcjogcHJvZmlsZUVkaXRQb3B1cCxcclxuICAgIGNhbGxCYWNrOiAoZGF0YSkgPT4ge1xyXG4gICAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKGRhdGEpO1xyXG4gICAgfVxyXG59KTtcclxuXHJcbmNvbnN0IHBvcHVwV2l0aEFkZFBob3RvRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcclxuICAgICAgICBwb3B1cFNlbGVjdG9yOiBwaG90b0FkZFBvcHVwLFxyXG4gICAgICAgIGNhbGxCYWNrOiAoaXRlbSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjYXJkID0gbmV3IENhcmQoaXRlbSwgJyNjYXJkLXRlbXBsYXRlJyxcclxuICAgICAgICAgICAgICAgIHtoYW5kbGVDYXJkQ2xpY2s6IChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBvcHVwV2l0aEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKHBob3RvUG9wdXApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3B1cFdpdGhJbWFnZS5vcGVuKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3B1cFdpdGhJbWFnZS5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQuZ2VuZXJhdGVDYXJkKCk7XHJcbiAgICAgICAgICAgIGNhcmRMaXN0LmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuY29uc3QgY2FyZHNBZGRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvbkNvbmZpZywgY2FyZHNBZGRGb3JtKTtcclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe25hbWVTZWxlY3RvcjogcHJvZmlsZVRpdGxlLCBhYm91dFVzZXJTZWxlY3RvcjogcHJvZmlsZVN1YnRpdGxlfSk7XHJcbmNvbnN0IGVkaXRQcm9maWxlRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25Db25maWcsIHByb2ZpbGVFZGl0Rm9ybSk7XHJcblxyXG5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgIHVzZXJJbmZvLnNldERhdGEobmFtZUlucHV0LCBhYm91dElucHV0KTtcclxuICAgIHBvcHVwV2l0aEVkaXRQcm9maWxlRm9ybS5vcGVuKCk7XHJcbiAgICBlZGl0UHJvZmlsZUZvcm1WYWxpZGF0b3Iuc2V0U3RhdGUoKTtcclxufSk7XHJcblxyXG5waG90b0FkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgIHBvcHVwV2l0aEFkZFBob3RvRm9ybS5vcGVuKCk7XHJcbiAgICBjYXJkc0FkZEZvcm1WYWxpZGF0b3Iuc2V0QnV0dG9uU3RhdGUoKTtcclxufSlcclxuXHJcbmNhcmRMaXN0LnJlbmRlckl0ZW1zKCk7XHJcbmVkaXRQcm9maWxlRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbmNhcmRzQWRkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG4iLCJcclxuZXhwb3J0IGNsYXNzIFNlY3Rpb24ge1xyXG4gICAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3Ipe1xyXG4gICAgICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMgPSBpdGVtcztcclxuICAgICAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgICAgIHRoaXMuX2NvbnRhaW5lciA9IGNvbnRhaW5lclNlbGVjdG9yO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlckl0ZW1zKCl7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyZWRJdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbn0iLCJcclxuXHJcbmV4cG9ydCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgICBjb25zdHJ1Y3Rvcih7IG5hbWVTZWxlY3RvciwgYWJvdXRVc2VyU2VsZWN0b3IgfSkge1xyXG4gICAgICAgIHRoaXMuX25hbWVTZWxlY3RvciA9IG5hbWVTZWxlY3RvcjtcclxuICAgICAgICB0aGlzLl9hYm91dFVzZXJTZWxlY3RvciA9IGFib3V0VXNlclNlbGVjdG9yO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFVzZXJJbmZvICgpIHtcclxuICAgICAgICByZXR1cm4geyBuYW1lOiB0aGlzLl9uYW1lU2VsZWN0b3IudGV4dENvbnRlbnQsIGFib3V0OiB0aGlzLl9hYm91dFVzZXJTZWxlY3Rvci50ZXh0Q29udGVudCB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RGF0YSAobmFtZUlucHV0LCBhYm91dElucHV0KSB7XHJcbiAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZ2V0VXNlckluZm8oKTtcclxuICAgICAgICBuYW1lSW5wdXQudmFsdWUgPSBkYXRhLm5hbWU7XHJcbiAgICAgICAgYWJvdXRJbnB1dC52YWx1ZSA9IGRhdGEuYWJvdXQ7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0VXNlckluZm8gKGRhdGEpIHtcclxuICAgICAgICB0aGlzLl9uYW1lU2VsZWN0b3IudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XHJcbiAgICAgICAgdGhpcy5fYWJvdXRVc2VyU2VsZWN0b3IudGV4dENvbnRlbnQgPSBkYXRhLmFib3V0O1xyXG4gICAgfVxyXG59Il0sIm5hbWVzIjpbIkNhcmQiLCJjb25zdHJ1Y3RvciIsImRhdGEiLCJ0ZW1wbGF0ZVNlbGVjdG9yIiwiaGFuZGxlQ2FyZENsaWNrIiwidGhpcyIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl90ZW1wbGF0ZVNlbGVjdG9yIiwiX2hhbmRsZUNhcmRDbGljayIsIl9nZXRUZW1wbGF0ZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfc2V0RGF0YSIsIl9jYXJkSW1hZ2UiLCJfZWxlbWVudCIsInNyYyIsImFsdCIsIl9jYXJkTmFtZSIsInRleHRDb250ZW50IiwiX2RlbGV0ZUNhcmQiLCJyZW1vdmUiLCJfbGlrZUNhcmQiLCJfbGlrZSIsImNsYXNzTGlzdCIsInRvZ2dsZSIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9kZWxldGVCdXR0b24iLCJhZGRFdmVudExpc3RlbmVyIiwiX2NhcmRMaWtlIiwiZ2VuZXJhdGVDYXJkIiwiRm9ybVZhbGlkYXRvciIsImNvbmZpZyIsImZvcm1FbGVtZW50IiwiX2NvbmZpZyIsIl9mb3JtRWxlbWVudCIsIl9pbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsIl9idXR0b25FbGVtZW50Iiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfc2hvd0Vycm9yIiwiaW5wdXRFbGVtZW50IiwiZXJyb3JFbGVtZW50IiwiaWQiLCJhZGQiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUVycm9yIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGFzSW52YWxpZElucHV0Iiwic29tZSIsIl90b2dnbGVCdXR0b25TdGF0ZSIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJkaXNhYmxlZCIsImZvckVhY2giLCJzZXRCdXR0b25TdGF0ZSIsInNldElucHV0VmFsaWRpdHkiLCJzZXRTdGF0ZSIsImVuYWJsZVZhbGlkYXRpb24iLCJwcm9maWxlRWRpdEJ1dHRvbiIsInByb2ZpbGVFZGl0UG9wdXAiLCJwaG90b0FkZEJ1dHRvbiIsInBob3RvQWRkUG9wdXAiLCJjYXJkc0FkZEZvcm0iLCJwcm9maWxlRWRpdEZvcm0iLCJwbGFjZXMiLCJuYW1lSW5wdXQiLCJhYm91dElucHV0IiwicHJvZmlsZVRpdGxlIiwicHJvZmlsZVN1YnRpdGxlIiwicGhvdG9Qb3B1cCIsInBob3RvTGlua0lucHV0IiwidmFsaWRhdGlvbkNvbmZpZyIsInZhbHVlIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwU2VsZWN0b3IiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwib3BlbiIsImNsb3NlIiwiZXZ0Iiwia2V5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJfY2xvc2VCdXR0b24iLCJ0YXJnZXQiLCJQb3B1cFdpdGhJbWFnZSIsInN1cGVyIiwiX2ltYWdlIiwiX3RpdGxlIiwiUG9wdXBXaXRoRm9ybSIsImNhbGxCYWNrIiwiX2NhbGxCYWNrIiwiX2dldElucHV0VmFsdWVzIiwiX2Zvcm1EYXRhIiwiaW5wdXQiLCJwcmV2ZW50RGVmYXVsdCIsInJlc2V0IiwiY2FyZExpc3QiLCJpdGVtcyIsInJlbmRlcmVyIiwiY29udGFpbmVyU2VsZWN0b3IiLCJfcmVuZGVyZWRJdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJhZGRJdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJyZW5kZXJJdGVtcyIsIml0ZW0iLCJjYXJkRWxlbWVudCIsInBvcHVwV2l0aEltYWdlIiwicG9wdXBXaXRoRWRpdFByb2ZpbGVGb3JtIiwidXNlckluZm8iLCJzZXRVc2VySW5mbyIsInBvcHVwV2l0aEFkZFBob3RvRm9ybSIsImNhcmRzQWRkRm9ybVZhbGlkYXRvciIsIm5hbWVTZWxlY3RvciIsImFib3V0VXNlclNlbGVjdG9yIiwiX25hbWVTZWxlY3RvciIsIl9hYm91dFVzZXJTZWxlY3RvciIsImdldFVzZXJJbmZvIiwiYWJvdXQiLCJzZXREYXRhIiwiZWRpdFByb2ZpbGVGb3JtVmFsaWRhdG9yIl0sInNvdXJjZVJvb3QiOiIifQ==