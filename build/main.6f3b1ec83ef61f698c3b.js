(()=>{"use strict";class e{constructor(e,t,r){this._name=e.name,this._link=e.link,this._templateSelector=t,this._handleOpenPopup=r}_getTemplate(){return document.querySelector(this._templateSelector).content.querySelector(".card").cloneNode(!0)}_setData(){this._cardImage=this._element.querySelector(".card__image"),this._cardImage.src=this._link,this._cardImage.alt=this._name,this._cardName=this._element.querySelector(".card__title"),this._cardName.textContent=this._name}_deleteCard(){this._element.remove(),this._element=null}_likeCard(){this._like=this._element.querySelector(".card__like"),this._like.classList.toggle("card__like_active")}_setEventListeners(){this._deleteButton=this._element.querySelector(".card__delete"),this._deleteButton.addEventListener("click",(()=>{this._deleteCard()})),this._cardImage.addEventListener("click",(()=>{this._handleOpenPopup(this._name,this._link)})),this._cardLike=this._element.querySelector(".card__like"),this._cardLike.addEventListener("click",(()=>{this._likeCard()}))}generateCard(){return this._element=this._getTemplate(),this._setData(),this._setEventListeners(),this._element}}class t{constructor(e,t){this._config=e,this._formElement=t,this._inputList=Array.from(this._formElement.querySelectorAll(this._config.inputSelector)),this._buttonElement=this._formElement.querySelector(this._config.submitButtonSelector)}_showError(e){const t=this._formElement.querySelector(`.${e.id}-error`);e.classList.add(this._config.inputErrorClass),t.classList.add(this._config.errorClass),t.textContent=e.validationMessage}_hideError(e){const t=this._formElement.querySelector(`.${e.id}-error`);e.classList.remove(this._config.inputErrorClass),t.classList.remove(this._config.errorClass),t.textContent=""}_checkInputValidity(e){e.validity.valid?this._hideError(e):this._showError(e)}_hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}_toggleButtonState(){this._hasInvalidInput(this._inputList)?(this._buttonElement.classList.add(this._config.inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._config.inactiveButtonClass),this._buttonElement.disabled=!1)}_setEventListeners(){this._toggleButtonState(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}setButtonState(){this._toggleButtonState()}setInputValidity(){this._inputList.forEach((e=>{this._checkInputValidity(e)}))}setState(){this._toggleButtonState(),this.setInputValidity()}enableValidation(){this._setEventListeners()}}const r=document.querySelectorAll(".popup__close"),n=document.querySelector("#button_edit"),s=document.querySelector("#popup_edit"),i=document.querySelector("#button_add"),o=document.querySelector("#popup_add"),a=document.querySelectorAll(".popup"),l=document.querySelector("#cardsAddForm"),d=document.querySelector("#profileEditForm"),c=document.querySelector(".places"),u=document.querySelector("#name"),_=document.querySelector("#about-person"),p=document.querySelector(".profile__title"),m=document.querySelector(".profile__subtitle"),h=document.querySelector(".popup__image"),v=document.querySelector(".popup__title"),y=document.querySelector("#popup_photo"),S=document.querySelector("#photo-link"),g={name:document.querySelector("#photo-name").value,link:S.value},k={inputSelector:".form__input",submitButtonSelector:".form__button",inactiveButtonClass:"form__button_inactive",inputErrorClass:"form__input_type_error",errorClass:"form__input-error_visible"};class E{constructor({items:e,renderer:t},r){this._renderedItems=e,this._renderer=t,this._container=r}addItem(e){this._container.prepend(e)}renderItems(){this._renderedItems.forEach((e=>{this._renderer(e)}))}renderNewCard(e){return e.preventDefault(),this._renderer(this._renderedItems)}}const f=new E({items:[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}],renderer:t=>{const r=new e(t,"#card-template",I).generateCard();f.addItem(r)}},c),L=new E({items:g,renderer:t=>{const r=new e(t,"#card-template",I).generateCard();L.addItem(r)}},c),q=e=>{e.classList.add("popup_opened"),document.addEventListener("keydown",b)},C=e=>{e.classList.remove("popup_opened"),document.removeEventListener("keydown",b)},b=e=>{if("Escape"===e.key){const e=document.querySelector(".popup_opened");C(e)}};r.forEach((e=>{const t=e.closest(".popup");e.addEventListener("click",(()=>C(t)))})),a.forEach((e=>{e.addEventListener("mousedown",(t=>{t.target===e&&C(e)}))}));const I=(e,t)=>{h.src=t,h.alt=e,v.textContent=e,q(y)},x=new t(k,l);x.enableValidation();const B=new t(k,d);B.enableValidation(),n.addEventListener("click",(e=>{e.preventDefault(),q(s),u.value=p.textContent,_.value=m.textContent,B.setState()})),i.addEventListener("click",(e=>{e.preventDefault(),q(o),l.reset(),x.setButtonState()})),l.addEventListener("submit",L.renderNewCard),d.addEventListener("submit",(e=>{e.preventDefault();const t=u.value,r=_.value;p.textContent=t,m.textContent=r,C(s)})),f.renderItems()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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YXpELFlBQWNnRyxFQUMzQnRDLEVBQWdCMUQsWUFBY2lHLEVBQzlCWCxFQUFXdEMsRUFBaUIsSUF1RGhDaUMsRUFBU0wsYSIsInNvdXJjZXMiOlsid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgQ2FyZCB7XHJcbiAgICBjb25zdHJ1Y3RvcihkYXRhLCB0ZW1wbGF0ZVNlbGVjdG9yLCBoYW5kbGVPcGVuUG9wdXApIHtcclxuICAgICAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xyXG4gICAgICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XHJcbiAgICAgICAgdGhpcy5fdGVtcGxhdGVTZWxlY3RvciA9IHRlbXBsYXRlU2VsZWN0b3I7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlT3BlblBvcHVwID0gaGFuZGxlT3BlblBvcHVwO1xyXG4gICAgfVxyXG5cclxuICAgIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50XHJcbiAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IpXHJcbiAgICAgICAgICAgIC5jb250ZW50XHJcbiAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKCcuY2FyZCcpXHJcbiAgICAgICAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcblxyXG4gICAgICAgIHJldHVybiBjYXJkRWxlbWVudDtcclxuICAgIH1cclxuXHJcbiAgICBfc2V0RGF0YSgpIHtcclxuICAgICAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19pbWFnZScpO1xyXG4gICAgICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgICAgIHRoaXMuX2NhcmRJbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xyXG4gICAgICAgIHRoaXMuX2NhcmROYW1lID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fdGl0bGUnKVxyXG4gICAgICAgIHRoaXMuX2NhcmROYW1lLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuICAgIH1cclxuXHJcbiAgICBfZGVsZXRlQ2FyZCgpIHtcclxuICAgICAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIF9saWtlQ2FyZCgpIHtcclxuICAgICAgICB0aGlzLl9saWtlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fbGlrZScpO1xyXG4gICAgICAgIHRoaXMuX2xpa2UuY2xhc3NMaXN0LnRvZ2dsZSgnY2FyZF9fbGlrZV9hY3RpdmUnKTtcclxuICAgIH1cclxuXHJcbiAgICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgdGhpcy5fZGVsZXRlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fZGVsZXRlJyk7XHJcbiAgICAgICAgdGhpcy5fZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9kZWxldGVDYXJkKCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICB0aGlzLl9jYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZU9wZW5Qb3B1cCh0aGlzLl9uYW1lLCB0aGlzLl9saW5rKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLl9jYXJkTGlrZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2xpa2UnKTtcclxuICAgICAgICB0aGlzLl9jYXJkTGlrZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fbGlrZUNhcmQoKTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGdlbmVyYXRlQ2FyZCgpIHtcclxuICAgICAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuICAgICAgICB0aGlzLl9zZXREYXRhKCk7XHJcbiAgICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XHJcbiAgICB9XHJcblxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICAgIGNvbnN0cnVjdG9yKGNvbmZpZywgZm9ybUVsZW1lbnQpIHtcclxuICAgICAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XHJcbiAgICAgICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcclxuICAgICAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fY29uZmlnLmlucHV0U2VsZWN0b3IpKTtcclxuICAgICAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9jb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG4gICAgfVxyXG5cclxuICAgIF9zaG93RXJyb3IoaW5wdXRFbGVtZW50KXtcclxuICAgICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICAgICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmVycm9yQ2xhc3MpO1xyXG4gICAgICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIH1cclxuXHJcbiAgICBfaGlkZUVycm9yKGlucHV0RWxlbWVudCl7XHJcbiAgICAgICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5lcnJvckNsYXNzKTtcclxuICAgICAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSAnJztcclxuICAgIH1cclxuXHJcbiAgICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCl7XHJcbiAgICAgICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgICAgICAgdGhpcy5fc2hvd0Vycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5faGlkZUVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9oYXNJbnZhbGlkSW5wdXQoKXtcclxuICAgICAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgX3RvZ2dsZUJ1dHRvblN0YXRlKCl7XHJcbiAgICAgICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCh0aGlzLl9pbnB1dExpc3QpKXtcclxuICAgICAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICAgICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9zZXRFdmVudExpc3RlbmVycygpe1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICBzZXRCdXR0b25TdGF0ZSgpIHtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpXHJcbiAgICB9XHJcblxyXG4gICAgc2V0SW5wdXRWYWxpZGl0eSgpIHtcclxuICAgICAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICBzZXRTdGF0ZSgpIHtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpXHJcbiAgICAgICAgdGhpcy5zZXRJbnB1dFZhbGlkaXR5KCk7XHJcbiAgICB9XHJcblxyXG4gICAgZW5hYmxlVmFsaWRhdGlvbigpe1xyXG4gICAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB9O1xyXG59IiwiZXhwb3J0IGNvbnN0IHBvcHVwQ2xvc2VCdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwX19jbG9zZScpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYnV0dG9uX2VkaXQnKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0UG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcG9wdXBfZWRpdCcpO1xyXG5leHBvcnQgY29uc3QgcGhvdG9BZGRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYnV0dG9uX2FkZCcpXHJcbmV4cG9ydCBjb25zdCBwaG90b0FkZFBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3BvcHVwX2FkZCcpO1xyXG5leHBvcnQgY29uc3QgcG9wdXBzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwJyk7XHJcbmV4cG9ydCBjb25zdCBjYXJkc0FkZEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2FyZHNBZGRGb3JtJyk7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdEZvcm0gPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcm9maWxlRWRpdEZvcm0nKVxyXG5leHBvcnQgY29uc3QgcGxhY2VzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBsYWNlcycpO1xyXG5leHBvcnQgY29uc3QgbmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI25hbWUnKTtcclxuZXhwb3J0IGNvbnN0IGpvYklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Fib3V0LXBlcnNvbicpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZVRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX3RpdGxlJyk7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlU3VidGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fc3VidGl0bGUnKTtcclxuZXhwb3J0IGNvbnN0IHBob3RvUG9wdXBJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW1hZ2UnKTtcclxuZXhwb3J0IGNvbnN0IHBob3RvUG9wdXBUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fdGl0bGUnKTtcclxuZXhwb3J0IGNvbnN0IHBob3RvUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcG9wdXBfcGhvdG8nKTtcclxuXHJcbmNvbnN0IHBob3RvTGlua0lucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Bob3RvLWxpbmsnKTtcclxuY29uc3QgcGhvdG9OYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcGhvdG8tbmFtZScpO1xyXG5leHBvcnQgY29uc3QgY2FyZERhdGEgPSB7bmFtZTogcGhvdG9OYW1lSW5wdXQudmFsdWUsIGxpbms6IHBob3RvTGlua0lucHV0LnZhbHVlfTtcclxuXHJcbmV4cG9ydCBjb25zdCB2YWxpZGF0aW9uQ29uZmlnID0ge1xyXG4gICAgaW5wdXRTZWxlY3RvcjogJy5mb3JtX19pbnB1dCcsXHJcbiAgICBzdWJtaXRCdXR0b25TZWxlY3RvcjogJy5mb3JtX19idXR0b24nLFxyXG4gICAgaW5hY3RpdmVCdXR0b25DbGFzczogJ2Zvcm1fX2J1dHRvbl9pbmFjdGl2ZScsXHJcbiAgICBpbnB1dEVycm9yQ2xhc3M6ICdmb3JtX19pbnB1dF90eXBlX2Vycm9yJyxcclxuICAgIGVycm9yQ2xhc3M6ICdmb3JtX19pbnB1dC1lcnJvcl92aXNpYmxlJ1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICAgIHtcclxuICAgICAgICBuYW1lOiAn0JDRgNGF0YvQtycsXHJcbiAgICAgICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9hcmtoeXouanBnJ1xyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBuYW1lOiAn0KfQtdC70Y/QsdC40L3RgdC60LDRjyDQvtCx0LvQsNGB0YLRjCcsXHJcbiAgICAgICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9jaGVseWFiaW5zay1vYmxhc3QuanBnJ1xyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBuYW1lOiAn0JjQstCw0L3QvtCy0L4nLFxyXG4gICAgICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvaXZhbm92by5qcGcnXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIG5hbWU6ICfQmtCw0LzRh9Cw0YLQutCwJyxcclxuICAgICAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2thbWNoYXRrYS5qcGcnXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIG5hbWU6ICfQpdC+0LvQvNC+0LPQvtGA0YHQutC40Lkg0YDQsNC50L7QvScsXHJcbiAgICAgICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9raG9sbW9nb3Jza3ktcmF5b24uanBnJ1xyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBuYW1lOiAn0JHQsNC50LrQsNC7JyxcclxuICAgICAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2JhaWthbC5qcGcnXHJcbiAgICB9XHJcbl07IiwiXHJcbmV4cG9ydCBjbGFzcyBTZWN0aW9uIHtcclxuICAgIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyfSwgY29udGFpbmVyU2VsZWN0b3Ipe1xyXG4gICAgICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMgPSBpdGVtcztcclxuICAgICAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgICAgIHRoaXMuX2NvbnRhaW5lciA9IGNvbnRhaW5lclNlbGVjdG9yO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlckl0ZW1zKCl7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyZWRJdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyTmV3Q2FyZChldnQpIHtcclxuICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fcmVuZGVyZXIodGhpcy5fcmVuZGVyZWRJdGVtcyk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBDYXJkIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgeyBGb3JtVmFsaWRhdG9yfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCB7XHJcbiAgICB2YWxpZGF0aW9uQ29uZmlnLFxyXG4gICAgaW5pdGlhbENhcmRzLFxyXG4gICAgcG9wdXBDbG9zZUJ1dHRvbnMsXHJcbiAgICBwcm9maWxlRWRpdEJ1dHRvbixcclxuICAgIHByb2ZpbGVFZGl0UG9wdXAsXHJcbiAgICBwaG90b0FkZEJ1dHRvbixcclxuICAgIHBob3RvQWRkUG9wdXAsXHJcbiAgICBwb3B1cHMsXHJcbiAgICBjYXJkc0FkZEZvcm0sXHJcbiAgICBwcm9maWxlRWRpdEZvcm0sXHJcbiAgICBwbGFjZXMsXHJcbiAgICBuYW1lSW5wdXQsXHJcbiAgICBqb2JJbnB1dCxcclxuICAgIHByb2ZpbGVUaXRsZSxcclxuICAgIHByb2ZpbGVTdWJ0aXRsZSxcclxuICAgIHBob3RvUG9wdXBJbWFnZSxcclxuICAgIHBob3RvUG9wdXBUaXRsZSxcclxuICAgIHBob3RvUG9wdXAsXHJcbiAgICBjYXJkRGF0YVxyXG4gICAgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcbmltcG9ydCB7IFNlY3Rpb24gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCAnLi9pbmRleC5jc3MnXHJcblxyXG5jb25zdCBjYXJkTGlzdCA9IG5ldyBTZWN0aW9uICh7XHJcbiAgICBpdGVtczogaW5pdGlhbENhcmRzLFxyXG4gICAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XHJcbiAgICAgICAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKGl0ZW0sICcjY2FyZC10ZW1wbGF0ZScsIGhhbmRsZU9wZW5Qb3B1cCk7XHJcbiAgICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xyXG4gICAgICAgIGNhcmRMaXN0LmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xyXG4gICAgfVxyXG59LCBwbGFjZXMpO1xyXG5cclxuY29uc3QgbmV3Q2FyZExpc3QgPSBuZXcgU2VjdGlvbih7XHJcbiAgICBpdGVtczogY2FyZERhdGEsXHJcbiAgICByZW5kZXJlcjogKGl0ZW0pID0+IHtcclxuICAgICAgICBjb25zdCBjYXJkID0gbmV3IENhcmQoaXRlbSwgJyNjYXJkLXRlbXBsYXRlJywgaGFuZGxlT3BlblBvcHVwKTtcclxuICAgICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQuZ2VuZXJhdGVDYXJkKCk7XHJcbiAgICAgICAgbmV3Q2FyZExpc3QuYWRkSXRlbShjYXJkRWxlbWVudCk7XHJcbiAgICB9XHJcbn0sIHBsYWNlcyk7XHJcblxyXG5jb25zdCBvcGVuUG9wdXAgPSAocG9wdXBzKSA9PiB7XHJcbiAgICBwb3B1cHMuY2xhc3NMaXN0LmFkZCgncG9wdXBfb3BlbmVkJyk7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgaGFuZGxlQ2xvc2VQb3B1cEJ5VGFwT25Fc2MgKTtcclxufTtcclxuXHJcbmNvbnN0IGNsb3NlUG9wdXAgPSAocG9wdXApID0+IHtcclxuICAgIHBvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX29wZW5lZCcpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZUNsb3NlUG9wdXBCeVRhcE9uRXNjICk7XHJcbn1cclxuXHJcbmNvbnN0IGhhbmRsZUNsb3NlUG9wdXBCeVRhcE9uRXNjICA9IChldnQpID0+IHtcclxuICAgIGlmIChldnQua2V5ID09PSAnRXNjYXBlJyl7XHJcbiAgICAgICAgY29uc3QgcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfb3BlbmVkJyk7XHJcbiAgICAgICAgY2xvc2VQb3B1cChwb3B1cCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbnBvcHVwQ2xvc2VCdXR0b25zLmZvckVhY2goKGNsb3NlQnV0dG9uKSA9PiB7XHJcbiAgICBjb25zdCBwb3B1cCA9IGNsb3NlQnV0dG9uLmNsb3Nlc3QoJy5wb3B1cCcpO1xyXG4gICAgY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBjbG9zZVBvcHVwKHBvcHVwKSlcclxufSk7XHJcblxyXG5wb3B1cHMuZm9yRWFjaCgocG9wdXApID0+IHtcclxuICAgIHBvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIChldnQpID0+IHtcclxuICAgICAgICBpZiAoZXZ0LnRhcmdldCA9PT0gcG9wdXApIHtcclxuICAgICAgICAgICAgY2xvc2VQb3B1cChwb3B1cCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuY29uc3QgZWRpdFByb2ZpbGUgPSAoZXZ0KSA9PiB7XHJcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIGNvbnN0IG5hbWVJbnB1dFZhbHVlID0gbmFtZUlucHV0LnZhbHVlO1xyXG4gICAgY29uc3Qgam9iSW5wdXRWYWx1ZSA9IGpvYklucHV0LnZhbHVlO1xyXG4gICAgcHJvZmlsZVRpdGxlLnRleHRDb250ZW50ID0gbmFtZUlucHV0VmFsdWU7XHJcbiAgICBwcm9maWxlU3VidGl0bGUudGV4dENvbnRlbnQgPSBqb2JJbnB1dFZhbHVlO1xyXG4gICAgY2xvc2VQb3B1cChwcm9maWxlRWRpdFBvcHVwKTtcclxufTtcclxuXHJcbmNvbnN0IGhhbmRsZU9wZW5Qb3B1cCA9IChuYW1lLCBsaW5rKSA9PiB7XHJcbiAgICBwaG90b1BvcHVwSW1hZ2Uuc3JjID0gbGluaztcclxuICAgIHBob3RvUG9wdXBJbWFnZS5hbHQgPSBuYW1lO1xyXG4gICAgcGhvdG9Qb3B1cFRpdGxlLnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIG9wZW5Qb3B1cChwaG90b1BvcHVwKTtcclxufVxyXG5cclxuLy8gY29uc3QgY3JlYXRlQ2FyZCA9IChjYXJkRGF0YSkgPT4ge1xyXG4vLyAgICAgcmV0dXJuIG5ldyBDYXJkKGNhcmREYXRhLCAnI2NhcmQtdGVtcGxhdGUnLCBoYW5kbGVPcGVuUG9wdXApLmdlbmVyYXRlQ2FyZCgpO1xyXG4vLyB9XHJcbi8vXHJcbi8vIGNvbnN0IGFkZENhcmQgPSAobmV3Q2FyZCkgPT4ge1xyXG4vLyAgICAgcGxhY2VzLnByZXBlbmQobmV3Q2FyZCk7XHJcbi8vIH1cclxuLy9cclxuLy8gaW5pdGlhbENhcmRzLmZvckVhY2goKGl0ZW0pID0+IHtcclxuLy8gICAgIGFkZENhcmQoY3JlYXRlQ2FyZChpdGVtKSk7XHJcbi8vIH0pXHJcblxyXG4vLyBjb25zdCByZW5kZXJOZXdDYXJkID0gKGV2dCkgPT4ge1xyXG4vLyAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbi8vICAgICBjb25zdCBuYW1lSW5wdXRWYWx1ZSA9IHBob3RvTmFtZUlucHV0LnZhbHVlO1xyXG4vLyAgICAgY29uc3QgbGlua0lucHV0VmFsdWUgPSBwaG90b0xpbmtJbnB1dC52YWx1ZTtcclxuLy8gICAgIGNvbnN0IGNhcmREYXRhID0ge25hbWU6IG5hbWVJbnB1dFZhbHVlLCBsaW5rOiBsaW5rSW5wdXRWYWx1ZX07XHJcbi8vICAgICBhZGRDYXJkKGNyZWF0ZUNhcmQoY2FyZERhdGEpKTtcclxuLy8gICAgIGNsb3NlUG9wdXAocGhvdG9BZGRQb3B1cCk7XHJcbi8vIH07XHJcblxyXG5jb25zdCBjYXJkc0FkZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uQ29uZmlnLCBjYXJkc0FkZEZvcm0pO1xyXG5jYXJkc0FkZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuY29uc3QgZWRpdFByb2ZpbGVGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvbkNvbmZpZywgcHJvZmlsZUVkaXRGb3JtKTtcclxuZWRpdFByb2ZpbGVGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2dCkgPT4ge1xyXG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBvcGVuUG9wdXAocHJvZmlsZUVkaXRQb3B1cCk7XHJcbiAgICBuYW1lSW5wdXQudmFsdWUgPSBwcm9maWxlVGl0bGUudGV4dENvbnRlbnQ7XHJcbiAgICBqb2JJbnB1dC52YWx1ZSA9IHByb2ZpbGVTdWJ0aXRsZS50ZXh0Q29udGVudDtcclxuICAgIGVkaXRQcm9maWxlRm9ybVZhbGlkYXRvci5zZXRTdGF0ZSgpXHJcbn0pO1xyXG5cclxucGhvdG9BZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiB7XHJcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIG9wZW5Qb3B1cChwaG90b0FkZFBvcHVwKTtcclxuICAgIGNhcmRzQWRkRm9ybS5yZXNldCgpO1xyXG4gICAgY2FyZHNBZGRGb3JtVmFsaWRhdG9yLnNldEJ1dHRvblN0YXRlKCk7XHJcbn0pO1xyXG5cclxuY2FyZHNBZGRGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIG5ld0NhcmRMaXN0LnJlbmRlck5ld0NhcmQpO1xyXG5wcm9maWxlRWRpdEZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZWRpdFByb2ZpbGUpO1xyXG5cclxuY2FyZExpc3QucmVuZGVySXRlbXMoKTsiXSwibmFtZXMiOlsiQ2FyZCIsImNvbnN0cnVjdG9yIiwiZGF0YSIsInRlbXBsYXRlU2VsZWN0b3IiLCJoYW5kbGVPcGVuUG9wdXAiLCJ0aGlzIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX3RlbXBsYXRlU2VsZWN0b3IiLCJfaGFuZGxlT3BlblBvcHVwIiwiX2dldFRlbXBsYXRlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImNsb25lTm9kZSIsIl9zZXREYXRhIiwiX2NhcmRJbWFnZSIsIl9lbGVtZW50Iiwic3JjIiwiYWx0IiwiX2NhcmROYW1lIiwidGV4dENvbnRlbnQiLCJfZGVsZXRlQ2FyZCIsInJlbW92ZSIsIl9saWtlQ2FyZCIsIl9saWtlIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2RlbGV0ZUJ1dHRvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJfY2FyZExpa2UiLCJnZW5lcmF0ZUNhcmQiLCJGb3JtVmFsaWRhdG9yIiwiY29uZmlnIiwiZm9ybUVsZW1lbnQiLCJfY29uZmlnIiwiX2Zvcm1FbGVtZW50IiwiX2lucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbnB1dFNlbGVjdG9yIiwiX2J1dHRvbkVsZW1lbnQiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9zaG93RXJyb3IiLCJpbnB1dEVsZW1lbnQiLCJlcnJvckVsZW1lbnQiLCJpZCIsImFkZCIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oaWRlRXJyb3IiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJzb21lIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImRpc2FibGVkIiwiZm9yRWFjaCIsInNldEJ1dHRvblN0YXRlIiwic2V0SW5wdXRWYWxpZGl0eSIsInNldFN0YXRlIiwiZW5hYmxlVmFsaWRhdGlvbiIsInBvcHVwQ2xvc2VCdXR0b25zIiwicHJvZmlsZUVkaXRCdXR0b24iLCJwcm9maWxlRWRpdFBvcHVwIiwicGhvdG9BZGRCdXR0b24iLCJwaG90b0FkZFBvcHVwIiwicG9wdXBzIiwiY2FyZHNBZGRGb3JtIiwicHJvZmlsZUVkaXRGb3JtIiwicGxhY2VzIiwibmFtZUlucHV0Iiwiam9iSW5wdXQiLCJwcm9maWxlVGl0bGUiLCJwcm9maWxlU3VidGl0bGUiLCJwaG90b1BvcHVwSW1hZ2UiLCJwaG90b1BvcHVwVGl0bGUiLCJwaG90b1BvcHVwIiwicGhvdG9MaW5rSW5wdXQiLCJjYXJkRGF0YSIsInZhbHVlIiwidmFsaWRhdGlvbkNvbmZpZyIsIlNlY3Rpb24iLCJpdGVtcyIsInJlbmRlcmVyIiwiY29udGFpbmVyU2VsZWN0b3IiLCJfcmVuZGVyZWRJdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJhZGRJdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJyZW5kZXJJdGVtcyIsIml0ZW0iLCJyZW5kZXJOZXdDYXJkIiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJjYXJkTGlzdCIsImNhcmRFbGVtZW50IiwibmV3Q2FyZExpc3QiLCJvcGVuUG9wdXAiLCJoYW5kbGVDbG9zZVBvcHVwQnlUYXBPbkVzYyIsImNsb3NlUG9wdXAiLCJwb3B1cCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJrZXkiLCJjbG9zZUJ1dHRvbiIsImNsb3Nlc3QiLCJ0YXJnZXQiLCJjYXJkc0FkZEZvcm1WYWxpZGF0b3IiLCJlZGl0UHJvZmlsZUZvcm1WYWxpZGF0b3IiLCJyZXNldCIsIm5hbWVJbnB1dFZhbHVlIiwiam9iSW5wdXRWYWx1ZSJdLCJzb3VyY2VSb290IjoiIn0=